<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" id="viewport" content="width = device-width, initial-scale = 1, minimum-scale = 1, maximum-scale = 1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<title>购物车编辑</title>
<link rel="stylesheet" type="text/css" href="css/example.css">
<link rel="stylesheet" type="text/css" href="css/style.css">
<link rel="stylesheet" href="css/weui.min.css">
<link rel="stylesheet" href="css/jq-weui.css">
<link rel="stylesheet" href="css/store.css">
</head>
<body>
	<div class="weui-toptips weui-toptips_warn js_tooltips"></div>
	<div id="container" class="container">
		<div class="page tabbar js_show">
			<div class="page__bd" style="height: 100%;">
				<div class="weui-tab">
		            <div class="weui-tab__panel pad0">
						
						<!-- 头部 -->
		            	<div class="we-title" style="border-bottom: 1px solid #999;">
		            			<a id="showTooltips" class="page_title_add we-save" id="complete">完成</a>
					        	<a class="page-left" href="index.html"><img src="img/back_icon.png" alt="" /></a>
					    </div>
						<div class="shopping-content">		          
			              <div class="sh-list">
			              	<ul>
			              		
			              		<li>
			              			<div class="weui-cells_checkbox">
								      <label class="weui-cell weui-check__label" for="s11">
								        <div class="weui-cell__hd sh-area-check ">
								          <input type="checkbox" class="weui-check" name="checkbox1" id="s11">
								          <i class="weui-icon-checked"></i>
								        </div>
								        <div class="weui-cell__bd sh-list-img">
								          	<img src="img/1.png" alt="" />
								        </div>					        
								      </label>	
								      <div class="sh-col1">
								          	<p class="sh-col1-name">爱上门 智能电子温度计 智能体温计ASM-WB-1就哈哈傻瓜打火锅啥时候付哥还</p>
								          	<div class="sh-col1-area">
								          		<div class="sh-col1-pr"><strong>价格：</strong><p>¥<span>123</span></p></div>
								          		<div class="weui-cell__ft sh-number-pr">
									              <div class="weui-count">
									                <a class="weui-count__btn weui-count__decrease minus" style="border-radius: 0;"></a>
									                <input num="" class="weui-count__number" type="number" value="12">
									                <a class="weui-count__btn weui-count__increase add" style="border-radius: 0;"></a>
									              </div>
									            </div>
								          	</div>
								          </div>
								    </div>
			              		</li>
			              		<li>
			              			<div class="weui-cells_checkbox">
								      <label class="weui-cell weui-check__label" for="s12">
								        <div class="weui-cell__hd">
								          <input type="checkbox" class="weui-check" name="checkbox1" id="s12">
								          <i class="weui-icon-checked"></i>
								        </div>
								        <div class="weui-cell__bd sh-list-img">
								          	<img src="img/1.png" alt="" />
								        </div>					        
								      </label>	
								      <div class="sh-col1">
								          	<p class="sh-col1-name">爱上门 智能电子温度计 智能体温计ASM-WB-1</p>
								          	<div class="sh-col1-area">
								          		<div class="sh-col1-pr"><strong>价格：</strong><p>¥<span>141</span></p></div>
								          		<div class="weui-cell__ft sh-number-pr">
									              <div class="weui-count">
									                <a class="weui-count__btn weui-count__decrease minus" style="border-radius: 0;"></a>
									                <input num="" class="weui-count__number" type="number" value="11">
									                <a class="weui-count__btn weui-count__increase add" style="border-radius: 0;"></a>
									              </div>
									            </div>
								          	</div>
								          </div>
								    </div>
			              		</li>
			              		<li>
			              			<div class="weui-cells_checkbox">
								      <label class="weui-cell weui-check__label" for="s13">
								        <div class="weui-cell__hd">
								          <input type="checkbox" class="weui-check" name="checkbox1" id="s13">
								          <i class="weui-icon-checked"></i>
								        </div>
								        <div class="weui-cell__bd sh-list-img">
								          	<img src="img/1.png" alt="" />
								        </div>					        
								      </label>	
								      <div class="sh-col1">
								          	<p class="sh-col1-name">爱上门 智能电子温度计 智能体温计ASM-WB-1</p>
								          	<div class="sh-col1-area">
								          		<div class="sh-col1-pr"><strong>价格：</strong><p>¥<span>132</span></p></div>
								          		<div class="weui-cell__ft sh-number-pr">
									              <div class="weui-count">
									                <a class="weui-count__btn weui-count__decrease minus" style="border-radius: 0;"></a>
									                <input num="" class="weui-count__number" type="number" value="3">
									                <a class="weui-count__btn weui-count__increase add" style="border-radius: 0;"></a>
									              </div>
									            </div>
								          	</div>
								          </div>
								    </div>
			              		</li>
			              		<li>
			              			<div class="weui-cells_checkbox">
								      <label class="weui-cell weui-check__label" for="s14">
								        <div class="weui-cell__hd">
								          <input type="checkbox" class="weui-check" name="checkbox1" id="s14">
								          <i class="weui-icon-checked"></i>
								        </div>
								        <div class="weui-cell__bd sh-list-img">
								          	<img src="img/1.png" alt="" />
								        </div>					        
								      </label>	
								      <div class="sh-col1">
								          	<p class="sh-col1-name">爱上门 智能电子温度计 智能体温计ASM-WB-1</p>
								          	<div class="sh-col1-area">
								          		<div class="sh-col1-pr"><strong>价格：</strong><p>¥<span>234</span></p></div>
								          		<div class="weui-cell__ft sh-number-pr">
									              <div class="weui-count">
									                <a class="weui-count__btn weui-count__decrease minus" style="border-radius: 0;"></a>
									                <input num="" class="weui-count__number" type="number" value="1">
									                <a class="weui-count__btn weui-count__increase add" style="border-radius: 0;"></a>
									              </div>
									            </div>
								          	</div>
								          </div>
								    </div>
			              		</li>
			              		<li>
			              			<div class="weui-cells_checkbox">
								      <label class="weui-cell weui-check__label" for="s15">
								        <div class="weui-cell__hd">
								          <input type="checkbox" class="weui-check" name="checkbox1" id="s15">
								          <i class="weui-icon-checked"></i>
								        </div>
								        <div class="weui-cell__bd sh-list-img">
								          	<img src="img/1.png" alt="" />
								        </div>					        
								      </label>	
								      <div class="sh-col1">
								          	<p class="sh-col1-name">爱上门 智能电子温度计 智能体温计ASM-WB-1</p>
								          	<div class="sh-col1-area">
								          		<div class="sh-col1-pr"><strong>价格：</strong><p>¥<span>232</span></p></div>
								          		<div class="weui-cell__ft sh-number-pr">
									              <div class="weui-count">
									                <a class="weui-count__btn weui-count__decrease minus" style="border-radius: 0;"></a>
									                <input num="" class="weui-count__number" type="number" value="1">
									                <a class="weui-count__btn weui-count__increase add" style="border-radius: 0;"></a>
									              </div>
									            </div>
								          	</div>
								          </div>
								    </div>
			              		</li>
			              	</ul>
			              </div>
					         
				        </div>


		            </div>
		            
		        </div>
		        <div class="comm-footer">
					        	    <div class="footer-main-col">
					        	    	 <div class="weui-cells_checkbox footer-btn-all">
								      <label class="weui-cell weui-check__label" for="s-all" style="padding-left: 0px;">
								        <div class="weui-cell__hd" style="color: #999;">
								          <input type="checkbox" class="weui-check" name="checkbox2" id="s-all">
								          <i class="weui-icon-checked" style="margin-left: 10px;"></i>
								          全选
								        </div>
								      </label>					 
								    </div>
					        	    
					        	    </div>
								<button class="btn-final">删除</button>
					</div>
			     </div>
		</div>
		
		
	</div>

<script type="text/javascript" src="js/zepto.min.js"></script>
<script type="text/javascript" src="js/fastClick.js"></script>
<script src="js/jquery-weui.js"></script>
<script src="js/city-picker.js"></script>

<script type="text/javascript">
//  计算价格
        function $(x){
          return document.querySelector(x);
        }
        function $s(x){
          return document.querySelectorAll(x);
        }
        var btns=$s("li [type=checkbox]");
//      console.log(btns)
        var btn=$("#s-all");
        var fina=$("#final-foot");
        var length=btns.length;
        var adds=$s('.add');
        var minus=$s('.minus');
        var shan=$('.btn-final');
        var list=$(".sh-list ul");
 // 全选按钮
        btn.onclick=function(){
            for(var i=0;i<length;i++){
               btns[i].checked=this.checked;
            }
            if(this.checked){

            }else{
                Price = 0;
            }
        }
// 添加商品数量和减少商品数量
        for(var i=0;i<adds.length;i++){
            adds[i].index=i;
            minus[i].index=i;
            adds[i].onclick=function(){
                var num=$s("[num='']")[this.index].value;
//              最大只能为99
                if(num >= 99){
                    $s("[num='']")[this.index].value = 99;
                }
                else{
                    $s("[num='']")[this.index].value = ++num;
                }
          
                panduan();
            }
            minus[i].onclick=function(){
                var num=$s("[num='']")[this.index].value;
                if(num <=1){
                    $s("[num='']")[this.index].value = 1;
                }
                else{
                    $s("[num='']")[this.index].value= --num;
                    btns[this.index].checked=false;
                }
                panduan();
            }
        }

        for(var i=0;i<length;i++){
            btns[i].onclick=function(){
                panduan();
            }

        }    
// 根据商品复选框的条件判断来判断全选框是否全选
        function panduan(){
            for(var i=0;i<length;i++){
                var isTrue=true;
                if(btns[i].checked==false){
                    btn.checked=false;
                }
                else if(btns[i].checked==true){
                    for(var i=0;i<length;i++){
                        if(btns[i].checked==false){
                            isTrue=false; 
                        }                             
                    }
                    if(!isTrue){
                        btn.checked=false;
                    }
                    else{
                        btn.checked=true;                 
                    }              
                }          
            }
        }
//     删除按钮
        shan.onclick=function(){
            for(var i=0;i<length;i++){
                if(btns[i].checked){
                	$s("li")[i].style.display = 'none';
                	$s("li [type='checkbox']")[i].checked = false;
                	if (i==(length-1)) {
                		btn.checked=false;
                	}
                }
            }
        }
</script>

</body>
</html>
