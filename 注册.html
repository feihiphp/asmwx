<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" id="viewport" content="width = device-width, initial-scale = 1, minimum-scale = 1, maximum-scale = 1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<title>注册页面</title>
<link rel="stylesheet" type="text/css" href="css/weui.min.css">
<link rel="stylesheet" type="text/css" href="css/example.css">
<link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>
	<div class="weui-toptips weui-toptips_warn js_tooltips"></div>
	<div id="container" class="container">
		<div class="page tabbar js_show">
			<div class="page__bd" style="height: 100%;">
				<div class="weui-tab">
		            <div class="weui-tab__panel pad0">
						
						<!-- 头部 -->
		            		<div class="we-title">
					        	<a href="register.html" class="page_title_add">登录</a>
					        	<a class="page-left" href="index.html"><img src="img/back_icon.png" alt="" /></a>				        
					    </div>
						<div class="page__bd pad50">
			                <div class="page__bd">
			              	 <div class="phone-number">
			            		  <div class="we-username">
			            			<input class="weui-input" name="username" pattern="[0-9]*" placeholder="请输入手机号码" type="number">
			            		  </div>
					        </div>
					        <div class="phone-number">
			            		  <div class="we-password">
			            			<input class="weui-input" name="password" pattern="[0-9]*" placeholder="请输入密码" type="password">
			            		  </div>
					        </div>
					        <div class="phone-number">
			            		  <div class="we-password">
			            			<input class="weui-input" name="again-password" pattern="[0-9]*" placeholder="再次输入密码" type="password">
			            		  </div>
					        </div>
					        <div class="we-phone-yz">
			            		  <div class="weui-cell weui-cell_vcode" style="padding: 0;">
							        <div class="weui-cell__hd">
							          <label class="weui-label" style="width: 60px;color: #565656;">验证码</label>
							        </div>
							        <div class="weui-cell__bd">
							          <input style="color: #565656;" name="yzm-input1" class="weui-input" type="tel" placeholder="请输入手机验证码">
							        </div>
							        <div class="weui-cell__ft">
							          <button onclick="sendSms()" class="weui-vcode-btn">获取验证码</button>
							        </div>
							      </div>
					        </div>
					        <div class="we-phone-yz">
			            		  <div class="weui-cell weui-cell_vcode" style="padding: 0;">
							        <div class="weui-cell__hd"><label class="weui-label" style="width: 60px;color: #565656;">验证码</label></div>
							        <div class="weui-cell__bd">
							          <input class="weui-input yzm-input2" name="yzm-input2" type="number" placeholder="请输入验证码">
							        </div>
							        <div class="weui-cell__ft">
							          <img class="weui-vcode-img" src="img/vcode.jpg">
							        </div>
							      </div>
					        </div>
			            	   
					        <div class="we-ensure">
					            <a class="we-ensure-btn" href="javascript:" id="showTooltips">注册</a>
					        </div>

				        </div>
					        
				        </div>


		            </div>
		            
		        </div>
			</div>
		</div>
		
	</div>

<script type="text/javascript" src="js/zepto.min.js"></script>
<script type="text/javascript" src="js/fastClick.js"></script>
<script type="text/javascript">
    $(function(){

        var $toast = $('#toast');
        //确认
        $('#showTooltips').on('click', function(){

        	var username = $('input[name="username"]').val().trim();
        	var password = $('input[name="password"]').val().trim();
        var password1 = $('input[name="again-password"]').val().trim();
        var input1 = $('input[name="yzm-input1"]').val().trim();
        var input2 = $('input[name="yzm-input2"]').val().trim();
        console.log(password)
        	var msg = '', bool = false;
        	if(input2 == ''){
        		bool = true;
        		msg = '请输入图形验证码';
        	}
        	if(input1 == ''){
        		bool = true;
        		msg = '请输入手机验证码';
        	}
        	if(!password == password1){
        		bool = true;
        		msg = '两次密码不一致';
        	}
        	if(password1 == ''){
        		bool = true;
        		msg = '请再次填写密码';
        	}
        	if(password == ''){
        		bool = true;
        		msg = '请填写密码';
        	}
        	
        	var reg2=/^0?(13[0-9]|15[012356789]|17[013678]|18[0-9]|14[57])[0-9]{8}$/;
        	if(!reg2.test(username) ){
        		bool = true;
        		msg = '手机格式不正确';
        	}
        	if(username == ''){
        		bool = true;
        		msg = '请输入手机号';
        	}
        	if(bool){
	        	$('.weui-toptips').html(msg).fadeIn(200);
	        	setTimeout(function() {
	                $('.weui-toptips').fadeOut(100);
	            }, 2000);
	        }else{
	            $toast.fadeIn(100);
	            //发送后台
	        	$.ajax({
	        		url: '',
	        		data: {
	        			password: password,
	        			new_password: new_password
	        		},
	        		type: 'post',
	        		success: function(res){
	        			///console.log(res);
	        			setTimeout(function () {
			                //$toast.fadeOut(100);
			                window.location.replace('my.html');
			            }, 1000);
	        		},
	        		error: function(e){
	        			//console.log(e);
	        			setTimeout(function () {
			                //$toast.fadeOut(100);
			                window.location.replace('my.html');
			            }, 1000);
	        		}
	        	});
	        }
        });
    });
</script>
</body>
</html>
